{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="header">
        <h1>GREENBASKET</h1>
        <div class="nav-links">
            <a href="/chome/">Home</a>
            <a href="/cveg/">Vegetables</a>
            <a href="/cfruit/">Fruits</a>
            <a href="/cprofile/">Profile</a>
            <a href="/viewcart/">My Cart</a>
            <a href="/c_orderlist/">My Orders</a>
            <a href="/">Logout</a>
        </div>
    </div>
    <div class="cvegadgres"></div>
    <div class="proview">
        <div class="viewleft">
                <img class="viewp" src="{{ p.image.url }}">
            <div class="buy">
                <form action="/cart/{{p.id}}/">
                    <p>
                        <input type="number" name="quantity" value="1" min="1" max="{{ p.stock }}" > Kg
                        <input type="submit" value="Add to Cart" class="btn btn-primary" style="background-color: #FFA500;">
                    </p>
                </form>
            </div>
        </div>
        <div class="viewright">
            <h2>{{p.name}}</h2><hr>
            <p>Seller : {{p.seller.name}}</p>
            <p>{{p.description}}</p>
            <p><strong>Rating :</strong> {{p.rating}}
                <span class="selling-price">
                    {% for _ in "12345"|make_list %}
                        {% if forloop.counter <= p.rating %}
                            <span class="star gold">★</span>
                        {% else %}
                            <span class="star">★</span>
                        {% endif %}
                    {% endfor %}
                </span>
            </p>
            <h3 class="d">{{ p.discount }}% off</h3>
            <h1 class="s">₹{{ p.selling_price }}/Kg</h1>
            <span class="org-price">₹{{ p.org_price }}/Kg</span><br><br>
            <p>Stock : {{p.stock}}</p>
            <h2>Reviews</h2>
            <hr>
            <div class="reviews-section">
                {% for review in reviews %}
                    <div class="review-item">
                        <p>{{review.costumer.name}} - date : {{review.created_at}}</p>
                        <p><strong>Rating :</strong> {{review.rating}}
                            <span class="selling-price">
                                {% for _ in "12345"|make_list %}
                                    {% if forloop.counter <= review.rating %}
                                    <span class="star gold">★</span>
                                    {% else %}
                                    <span class="star">★</span>
                                    {% endif %}
                                {% endfor %}
                            </span>
                        </p>
                        <p>{{ review.review }}</p>
                        {% if review.review_img %}
                            <img src="{{ review.review_img.url }}" alt="Review Image" style="max-width: 200px; max-height: 200px;">
                        {% endif %}
                        <hr>
                    </div>
                {% empty %}
                    <p>No reviews</p>
                {% endfor %}

            
        </div>
    </div>
    
</body>
</html>  




<script>
    const slides = document.querySelectorAll('.slide');
    let current = 0;
    function nextSlide() {
        slides[current].classList.remove('active');
        slides[current].classList.add('exit');
        current = (current + 1) % slides.length;
        slides[current].classList.remove('exit');
        slides[current].classList.add('active');
    }
    setInterval(nextSlide, 4000);
</script>